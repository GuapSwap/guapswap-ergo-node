name: guapswap-ergo-node

services:
  node:
    container_name: ergo-node
    image: ergoplatform/ergo:${ERGO_NODE_VERSION:-latest}
    command: --${ERGO_NODE_NETWORK_TYPE} -c /home/ergo/ergo.conf
    volumes:
      - ./ergo_node/.ergo:/home/ergo/.ergo
      - ./ergo_node/ergo.conf:/home/ergo/ergo.conf:ro
    ports:
      - ${ERGO_NODE_PORT}:${ERGO_NODE_PORT}
      - ${ERGO_NODE_API_PORT}:${ERGO_NODE_API_PORT}
    restart: unless-stopped
    environment:
      - _JAVA_OPTIONS=-Xms${ERGO_NODE_HEAP_SIZE:-4G} -Xmx${ERGO_NODE_HEAP_SIZE:-4G}
    env_file:
      - .env
    logging:
      options:
        max-size: 50m
        max-file: 1

networks:
  ergo:
    external: false
    name: ergo-node-network